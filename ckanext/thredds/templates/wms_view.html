{% extends "dataviewer/base.html" %}

{% block page %}
  {% resource 'thredds/wms' %}
  {% resource 'thredds/wms_view.js' %}

  <link rel="stylesheet" href="/css/leaflet.css" />
  <link rel="stylesheet" href="/css/Control.FullScreen.css" />
  <link rel="stylesheet" href="/css/leaflet.timedimension.control.css" />
  <link rel="stylesheet" href="/css/style.css" />


    <div id="wms-view" class="container">

      <div class="well">
        <a data-toggle="collapse" href="#collapse_preferences" aria-expanded="true" aria-controls="collapse_preferences">
              Map Preferences
              <i class="icon-angle-down pull-right"></i>
          </a>
{#}
          <h3 style="margin:0px 0px 10px">Map Preferences</h3>
{#}
        <div id ="collapse_preferences" class="collapse">
           <ul class="nav nav-pills" style="margin:0px 0px 10px">
             <li class="active"><a data-toggle="pill" href="#style-pane">Style</a></li>
             <li><a data-toggle="pill" href="#data-pane">Data</a></li>
             <li><a data-toggle="pill" href="#opacity-pane">Opacity</a></li>
             <li><a data-toggle="pill" href="#export-pane">Export</a></li>
           </ul>

           <div class="tab-content" style="display:inline">
             <div id="style-pane" class="tab-pane active">
               <div id="palette" class="input-group">
                 <span class="input-group-addon">Color Palette</span>
               </div>
               <div id="style" class="input-group">
                 <span class="input-group-addon">Plot Style</span>
               </div>
               <div id="min-field" class="input-group">
                 <span class="input-group-addon">Minimum Value</span>
               </div>
               <div id="max-field" class="input-group">
                 <span class="input-group-addon">Maximum Value</span>
               </div>
               <div id="num-colorband" class="input-group">
                 <span class="input-group-addon">Number of Colorbands</span>
               </div>
             </div>

             <div id="data-pane" class="tab-pane">
               <div id="layer" class="input-group">
                 <span class="input-group-addon">Layer</span>
               </div>
               <div class="input-group">
                 <span class="input-group-addon">Logscale</span>
                 <select name="logscale" id="logscale" class="form-control">
                   <option value="false" selected>false</option>
                   <option value="true">true</option>
                 </select>
               </div>
             </div>

             <div id="opacity-pane" class="tab-pane"></div>
             <div id="export-pane" class="tab-pane"></div>
           </div>
      </div>
</div> {#} collapse {#}
{% if subset_params != '' %}
<i><h5>Double Click within rectangle to add (further) time lines</h5></i>
<br>
{% else %}
<i><h5>Double Click on map to add further time lines</h5></i>
<br>
{% endif %}

        <div id="map" class="map" data-module="wms_view"
             data-module-resource_id="{{ resource_id }}"
             data-module-subset_params="{{h.dump_json(subset_params)}}"
             data-module-spatial_params="{{spatial_params}}"
             data-module-site_url="{{ h.dump_json(h.url('/', locale='default', qualified=true)) }}"
             data-module-minimum ="{{ minimum }}"
             data-module-maximum ="{{ maximum }}"
             data-module-num_colorbands ="{{ num_colorbands }}"
             data-module-logscale ="{{ logscale }}"
             data-module-default_layer ="{{ default_layer }}"
             data-module-default_colormap ="{{ default_colormap }}"
        >
        </div>

        <div id="chart" class="chart-wrapper"></div>

    </div>
{% endblock %}
